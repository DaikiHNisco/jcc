(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{dH7C:function(e,t,n){"use strict";n.r(t),n.d(t,"ExampleModule",(function(){return we}));var o=n("ofXK"),i=n("3Pt+"),l=n("tyNb"),a=n("vvyD"),c=n("PCNd"),s=n("M0ag"),r=n("w7eE"),d=n("o0su"),m=n("fXoL"),u=n("IlGR"),p=n("/1cH"),b=n("V8WV"),h=n("0EQZ"),f=n("0IaG"),g=n("kmnG"),C=n("qFsG"),w=n("bTqV"),y=n("NFeN"),M=n("FKr1"),v=n("bSwM");const k=["autoCompleteInput"];function D(e,t){if(1&e&&(m.Ub(0,"mat-label"),m.Dc(1),m.Tb()),2&e){const e=m.gc();m.Cb(1),m.Ec(e.model.label)}}function T(e,t){if(1&e&&(m.Ub(0,"span"),m.Dc(1),m.Tb()),2&e){const e=m.gc().$implicit;m.Cb(1),m.Ec(e.Name)}}function x(e,t){if(1&e){const e=m.Vb();m.Ub(0,"div",12),m.cc("click",(function(t){m.vc(e);const n=m.gc().$implicit;return m.gc().optionClicked(t,n)})),m.Ub(1,"mat-checkbox",13),m.cc("click",(function(t){return m.vc(e),m.gc(2).rowItemClick(t)}))("change",(function(t){m.vc(e);const n=m.gc().$implicit;return m.gc().rowItemChange(t,n)})),m.Dc(2),m.Tb(),m.Tb()}if(2&e){const e=m.gc().$implicit,t=m.gc();m.Cb(1),m.mc("checked",t.rowItemChanged(e)),m.Cb(1),m.Fc(" ",e.Name," ")}}function O(e,t){if(1&e&&(m.Ub(0,"mat-option",10),m.Bc(1,T,2,1,"span",2),m.Bc(2,x,3,2,"div",11),m.Tb()),2&e){const e=t.$implicit,n=m.gc();m.nc("title",e.Name),m.mc("value",e.Value),m.Cb(1),m.mc("ngIf",!n.model.isMultiple),m.Cb(1),m.mc("ngIf",n.model.isMultiple)}}let I=(()=>{class e{constructor(e,t,n){this.dialog=e,this.usedLookupService=t,this.sampleService=n,this.lookupCtrl=new i.e,this.usedData=[],this.selection=new h.c(!0,[])}ngOnInit(){this.usedLookupService.where("ParamId").equals(this.model.name).toArray().then(e=>this.usedData=e.sort(this.sort))}closeAutocomplete(){setTimeout(()=>{this.autoComplete.closePanel()},0)}openDialog(){return e=this,void 0,n=function*(){var e=new s.j;e.title=this.model.label,e.columns=S,e.isMultiple=this.model.isMultiple,e.getDataSource=this.sampleService.getElement(),e.selectedData=this.model.value.split(","),this.dialog.open(b.a,{data:e}).afterClosed().subscribe(e=>{e&&(e.map(e=>new d.q({KeyId:this.model.name+"_"+e.value,ParamId:this.model.name,Value:e.value,Name:e.name,LastUsedDate:new Date})).map(e=>{this.usedLookupService.delete(e.KeyId),this.usedLookupService.insert(e)}),this.model.value=e.map(e=>e.value).join(","),this.usedLookupService.where("ParamId").equals(this.model.name).toArray().then(t=>{this.usedData=t.sort(this.sort);var n=e.map(e=>e.value);this.selection.clear(),this.usedData.filter(e=>n.includes(e.Value)).forEach(e=>this.selection.toggle(e))}))})},new((t=void 0)||(t=Promise))((function(o,i){function l(e){try{c(n.next(e))}catch(t){i(t)}}function a(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,a)}c((n=n.apply(e,[])).next())}));var e,t,n}optionSelected(e){var t=this.usedData.find(t=>t.Value===e.option.value);t&&(this.model.isMultiple||this.selection.clear(),this.selection.toggle(t),this.updateLatUseDate(t),this.displaySelected())}displaySelected(){this.model.value=this.usedData.filter(e=>this.selection.isSelected(e)).map(e=>e.Value).join(",")}optionClicked(e,t){e.stopPropagation(),this.selection.toggle(t),this.updateLatUseDate(t),this.displaySelected()}rowItemClick(e){e.stopPropagation()}rowItemChange(e,t){e&&(this.selection.toggle(t),this.updateLatUseDate(t)),this.displaySelected()}rowItemChanged(e){return this.selection.isSelected(e)}updateLatUseDate(e){this.selection.isSelected(e)&&(e.LastUsedDate=new Date,this.usedLookupService.update(e.KeyId,e),this.usedData.filter(t=>t.KeyId==e.KeyId).forEach(t=>t.LastUsedDate=e.LastUsedDate))}sort(e,t){var n=e.Value.toUpperCase(),o=t.Value.toUpperCase();return n<o?-1:n>o?1:0}}return e.\u0275fac=function(t){return new(t||e)(m.Ob(f.b),m.Ob(d.r),m.Ob(d.l))},e.\u0275cmp=m.Ib({type:e,selectors:[["app-lookup"]],viewQuery:function(e,t){var n;1&e&&m.Ic(k,!0,p.c),2&e&&m.rc(n=m.dc())&&(t.autoComplete=n.first)},inputs:{model:"model"},decls:10,vars:7,consts:[[1,"flexiblebox"],[1,"lookup"],[4,"ngIf"],["matInput","","name","name",3,"placeholder","matAutocomplete","ngModel","ngModelChange"],["autoCompleteInput",""],["mat-button","","matSuffix","",1,"popup-btn",3,"click"],["fontSet","fa","fontIcon","fa-search","inline",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","title",4,"ngFor","ngForOf"],[3,"value","title"],[3,"click",4,"ngIf"],[3,"click"],[3,"checked","click","change"]],template:function(e,t){if(1&e&&(m.Ub(0,"div",0),m.Ub(1,"mat-form-field",1),m.Bc(2,D,2,1,"mat-label",2),m.Ub(3,"input",3,4),m.cc("ngModelChange",(function(e){return t.model.value=e})),m.Tb(),m.Ub(5,"button",5),m.cc("click",(function(){return t.closeAutocomplete(),t.openDialog()})),m.Pb(6,"mat-icon",6),m.Tb(),m.Ub(7,"mat-autocomplete",7,8),m.cc("optionSelected",(function(e){return t.optionSelected(e)})),m.Bc(9,O,3,4,"mat-option",9),m.Tb(),m.Tb(),m.Tb()),2&e){const e=m.sc(8);m.Cb(1),m.Ac("width",t.model.textWidthPx),m.Cb(1),m.mc("ngIf",t.model.label),m.Cb(1),m.nc("placeholder",t.model.placeholder),m.mc("matAutocomplete",e)("ngModel",t.model.value),m.Cb(6),m.mc("ngForOf",t.usedData)}},directives:[g.b,o.o,C.b,p.c,i.b,i.n,i.q,w.a,g.f,y.a,p.a,o.n,g.e,M.n,v.a],styles:[".popup-icon[_ngcontent-%COMP%]{font-size:16px;margin:2px;display:block}.popup-btn[_ngcontent-%COMP%]:hover{background-color:#ddd}.flexiblebox[_ngcontent-%COMP%]{display:flex;align-items:center}.popup-btn[_ngcontent-%COMP%]{display:inline-block;font-size:16px;padding:0;min-width:36px;border-radius:50%}"]}),e})();const S=[new s.h({id:"name",name:"\u5143\u7d20\u540d",type:new s.b({type:s.c.string})}),new s.h({id:"jpn",name:"\u65e5\u672c\u8a9e\u540d",type:new s.b({type:s.c.string})}),new s.h({id:"weight",name:"\u8cea\u91cf",type:new s.b({type:s.c.number,format:"0.0-6"})}),new s.h({id:"symbol",name:"\u5143\u7d20\u8a18\u53f7",type:new s.b({type:s.c.string})})];var U=n("d3UM"),P=n("f0Cb");function V(e,t){if(1&e&&(m.Ub(0,"mat-option",4),m.Dc(1),m.Tb()),2&e){const e=t.$implicit;m.mc("value",e.value),m.Cb(1),m.Fc(" ",e.viewValue," ")}}function _(e,t){if(1&e){const e=m.Vb();m.Ub(0,"mat-select"),m.Ub(1,"input",2),m.cc("ngModelChange",(function(t){return m.vc(e),m.gc().value=t}))("keyup",(function(t){return m.vc(e),m.gc().onKey(t.target.value)})),m.Tb(),m.Pb(2,"mat-divider"),m.Pb(3,"mat-option"),m.Bc(4,V,2,2,"mat-option",3),m.Tb()}if(2&e){const e=m.gc();m.Cb(1),m.nc("placeholder",e.model.placeholder),m.mc("ngModel",e.value),m.Cb(3),m.mc("ngForOf",e.filteredOptions)}}function F(e,t){if(1&e&&(m.Ub(0,"mat-option",4),m.Dc(1),m.Tb()),2&e){const e=t.$implicit;m.mc("value",e.value),m.Cb(1),m.Fc(" ",e.viewValue," ")}}function L(e,t){if(1&e){const e=m.Vb();m.Ub(0,"mat-select",5),m.Ub(1,"input",6),m.cc("ngModelChange",(function(t){return m.vc(e),m.gc().value=t}))("keyup",(function(t){return m.vc(e),m.gc().onKey(t.target.value)})),m.Tb(),m.Pb(2,"mat-divider"),m.Bc(3,F,2,2,"mat-option",3),m.Tb()}if(2&e){const e=m.gc();m.Cb(1),m.nc("placeholder",e.model.placeholder),m.mc("ngModel",e.value),m.Cb(2),m.mc("ngForOf",e.filteredOptions)}}let E=(()=>{class e{constructor(){this.filteredOptions=[]}ngOnInit(){this.model.dataSource.forEach(e=>{this.filteredOptions.push(Object.assign({},e))})}onKey(e){this.filteredOptions=this._filter(e)}_filter(e){const t=e.toLowerCase();let n=[];for(let o=0;o<this.model.dataSource.length;o++){let e=this.model.dataSource[o];e.viewValue.toLowerCase().indexOf(t)>=0&&n.push(e)}return n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Ib({type:e,selectors:[["app-select-list"]],inputs:{model:"model"},decls:5,vars:5,consts:[[4,"ngIf"],["multiple","",4,"ngIf"],["matInput","","name","singleInput","autocomplete","off",1,"mat-option",3,"placeholder","ngModel","ngModelChange","keyup"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["multiple",""],["matInput","","name","multiInput","autocomplete","off",1,"mat-option",3,"placeholder","ngModel","ngModelChange","keyup"]],template:function(e,t){1&e&&(m.Ub(0,"mat-form-field"),m.Ub(1,"mat-label"),m.Dc(2),m.Tb(),m.Bc(3,_,5,3,"mat-select",0),m.Bc(4,L,4,3,"mat-select",1),m.Tb()),2&e&&(m.Ac("width",t.model.textWidthPx),m.Cb(2),m.Ec(t.model.label),m.Cb(1),m.mc("ngIf",!t.model.isMultiple),m.Cb(1),m.mc("ngIf",t.model.isMultiple))},directives:[g.b,g.e,o.o,U.a,C.b,i.b,i.n,i.q,P.a,M.n,o.n],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),e})();var B=n("k7ou"),N=n("iadO");let $=(()=>{class e{constructor(){this.dayOfWeekStr=["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],this.valueChange=new m.o}ngOnInit(){}horidayFilter(e){var t=!0;switch(this.model.holidayMode){case B.b.NoSet:break;case B.b.DayOfWeeks:if(null!=this.model.holidayOfWeeksList){var n=e.getDay();t=!this.model.holidayOfWeeksList.includes(n)}break;case B.b.Days:null!=this.model.holidayList&&(t=!this.model.holidayList.some(t=>this.parseStr_yyyyMMdd(t)==this.parseStr_yyyyMMdd(e)));break;case B.b.Mix:var o=!0,i=!0;null!=this.model.holidayOfWeeksList&&(n=e.getDay(),o=!this.model.holidayOfWeeksList.includes(n)),null!=this.model.holidayList&&(i=!this.model.holidayList.some(t=>this.parseStr_yyyyMMdd(t)==this.parseStr_yyyyMMdd(e))),t=o&&i}return t}change(){this.doCheckValue()?this.valueChange.emit(this.model.value):this.valueChange.emit(null)}dateChange(){this.change()}dateSelectedChange(e){this.model.value=e,this.change()}dayOfWeek(e){var t=this.parseStr_DayOfWeek(e);return null!=t&&this.doCheckValue()?`\uff08${t}\uff09`:""}doCheckValue(){if(!this.model.value||!this.model.min||!this.model.max)return!1;if(this.model.holidayMode!=B.b.NoSet&&!this.horidayFilter(this.model.value))return!1;let e=this.parseStr_yyyyMMdd(new Date(this.model.value.getTime())),t=this.parseStr_yyyyMMdd(new Date(this.model.min.getTime())),n=this.parseStr_yyyyMMdd(new Date(this.model.max.getTime()));return t<=e&&e<=n}parseDate(e){if(8!=(e=e.replace(/\//g,"")).length)return null;var t=Number(e.slice(0,4)),n=Number(e.slice(4,6));if(n<1||12<n)return null;var o=Number(e.slice(6,8)),i=new Date(t,n,0);return 0==o||i.getDate()<o||"Invalid Date"===i.toString()?null:new Date(t,n-1,o)}parseStr_yyyyMMdd(e){var t="";try{t=`${e.getFullYear()}${("00"+(e.getMonth()+1).toString()).slice(-2)}${("00"+e.getDate().toString()).slice(-2)}`}catch(n){}return t}parseStr_DayOfWeek(e){var t=this.parseDate(e);if(null!=t&&10==e.length){var n=t.getDay();if(n<=12)return this.dayOfWeekStr[n]}return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Ib({type:e,selectors:[["app-date-picker"]],inputs:{model:"model"},outputs:{valueChange:"valueChange"},decls:8,vars:9,consts:[[1,"form-field"],["matInput","","maxlength","10",1,"input",3,"tabindex","placeholder","matDatepicker","min","max","matDatepickerFilter","ngModel","ngModelChange","dateChange"],["pickerInput",""],[1,"dayOfWeek"],["matSuffix","",3,"for"],[3,"selectedChanged"],["picker",""]],template:function(e,t){if(1&e&&(m.Ub(0,"mat-form-field",0),m.Ub(1,"input",1,2),m.cc("ngModelChange",(function(e){return t.model.value=e}))("dateChange",(function(){return t.dateChange()})),m.Tb(),m.Ub(3,"span",3),m.Dc(4),m.Tb(),m.Pb(5,"mat-datepicker-toggle",4),m.Ub(6,"mat-datepicker",5,6),m.cc("selectedChanged",(function(e){return t.dateSelectedChange(e)})),m.Tb(),m.Tb()),2&e){const e=m.sc(2),n=m.sc(7);m.Cb(1),m.nc("placeholder",t.model.placeholder),m.mc("tabindex",t.model.tabindex)("matDatepicker",n)("min",t.model.min)("max",t.model.max)("matDatepickerFilter",t.horidayFilter.bind(t))("ngModel",t.model.value),m.Cb(3),m.Ec(t.dayOfWeek(e.value)),m.Cb(1),m.mc("for",n)}},directives:[g.b,C.b,N.b,i.b,i.j,i.n,i.q,N.d,g.f,N.a],styles:[".form-field[_ngcontent-%COMP%]{white-space:nowrap}.dayOfWeek[_ngcontent-%COMP%]{position:relative;right:32px;background-color:#fff}"]}),e})();var R=n("QibW"),j=n("+0xr");function A(e,t){if(1&e&&(m.Ub(0,"th",7),m.Dc(1),m.Tb()),2&e){const e=m.gc().$implicit;m.Cb(1),m.Fc(" ",e.name," ")}}function W(e,t){if(1&e&&(m.Ub(0,"span"),m.Dc(1),m.Tb()),2&e){const e=m.gc().$implicit,t=m.gc().$implicit;m.Cb(1),m.Ec(e[t.id])}}function H(e,t){if(1&e&&(m.Ub(0,"span"),m.Dc(1),m.hc(2,"number"),m.Tb()),2&e){const e=m.gc().$implicit,t=m.gc().$implicit;m.Cb(1),m.Ec(m.jc(2,1,e[t.id],t.type.format))}}function K(e,t){if(1&e&&(m.Ub(0,"span"),m.Dc(1),m.hc(2,"date"),m.Tb()),2&e){const e=m.gc().$implicit,t=m.gc().$implicit;m.Cb(1),m.Ec(m.jc(2,1,e[t.id],t.type.format))}}function G(e,t){if(1&e&&(m.Ub(0,"span"),m.Dc(1),m.hc(2,"percent"),m.Tb()),2&e){const e=m.gc().$implicit,t=m.gc().$implicit;m.Cb(1),m.Ec(m.jc(2,1,e[t.id],t.type.format))}}function q(e,t){if(1&e&&(m.Ub(0,"span"),m.Dc(1),m.hc(2,"currency"),m.Tb()),2&e){const e=m.gc().$implicit,t=m.gc().$implicit;m.Cb(1),m.Ec(m.jc(2,1,e[t.id],t.type.format))}}function Q(e,t){if(1&e&&(m.Ub(0,"td",8),m.Sb(1,9),m.Bc(2,W,2,1,"span",10),m.Bc(3,H,3,4,"span",10),m.Bc(4,K,3,4,"span",10),m.Bc(5,G,3,4,"span",10),m.Bc(6,q,3,4,"span",10),m.Rb(),m.Tb()),2&e){const e=t.$implicit,n=m.gc().$implicit,o=m.gc();m.mc("ngClass",o.getFormat(n.type.type))("ngStyle",o.checkCellCondition(n.id,e[n.id])),m.Cb(1),m.mc("ngSwitch",n.type.type),m.Cb(1),m.mc("ngSwitchCase",o.colType.string),m.Cb(1),m.mc("ngSwitchCase",o.colType.number),m.Cb(1),m.mc("ngSwitchCase",o.colType.date),m.Cb(1),m.mc("ngSwitchCase",o.colType.percent),m.Cb(1),m.mc("ngSwitchCase",o.colType.currency)}}function z(e,t){1&e&&(m.Sb(0,4),m.Bc(1,A,2,1,"th",5),m.Bc(2,Q,7,8,"td",6),m.Rb()),2&e&&m.nc("matColumnDef",t.$implicit.id)}function Z(e,t){1&e&&m.Pb(0,"tr",11)}function J(e,t){if(1&e&&m.Pb(0,"tr",12),2&e){const e=t.$implicit,n=m.gc();m.mc("ngStyle",n.checkRowCondition(e))}}let X=(()=>{class e{constructor(){this.colType=s.c}ngOnInit(){this.displayedColumns=this.model.columns.map(e=>e.id)}getFormat(e){return{"str-fmt":e==s.c.string,"num-fmt":e==s.c.number||e==s.c.percent||e==s.c.currency,"date-fmt":e==s.c.date}}checkCellCondition(e,t){var n=this.model.columns.filter(t=>t.id==e)[0],o=null;if(n&&n.conditions)for(var i of n.conditions)if(o=i.check(t))break;return o}checkRowCondition(e){var t=null;if(this.model.rowConditions)for(var n of this.model.rowConditions)if(t=n.condition.check(e[n.targetId]))break;return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Ib({type:e,selectors:[["app-table"]],inputs:{model:"model"},decls:4,vars:5,consts:[["mat-table","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"ngStyle",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass","ngStyle",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",3,"ngClass","ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],["mat-header-row",""],["mat-row","",3,"ngStyle"]],template:function(e,t){1&e&&(m.Ub(0,"table",0),m.Bc(1,z,3,1,"ng-container",1),m.Bc(2,Z,1,0,"tr",2),m.Bc(3,J,1,1,"tr",3),m.Tb()),2&e&&(m.mc("dataSource",t.model.dataSource),m.Cb(1),m.mc("ngForOf",t.model.columns),m.Cb(1),m.mc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),m.Cb(1),m.mc("matRowDefColumns",t.displayedColumns))},directives:[j.j,o.n,j.g,j.i,j.c,j.e,j.b,j.d,j.a,o.m,o.p,o.q,o.r,j.f,j.h],pipes:[o.g,o.f,o.v,o.d],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:5px 0 0 0}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 5px 0 0;border-right:1px solid #3c6690}tr.mat-header-row[_ngcontent-%COMP%]{height:40px}tr.mat-footer-row[_ngcontent-%COMP%], tr.mat-row[_ngcontent-%COMP%]{height:36px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;color:#fff;background:#69f;border-left:1px solid #a8b7c5;border-top:1px solid #a8b7c5;border-bottom:1px solid #a8b7c5;padding:4px 0;font-size:16px;font-weight:700}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d4f0fd}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #a8b7c5;border-bottom:1px solid #a8b7c5;border-top:none;padding:4px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-radius:0 0 0 5px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-radius:0 0 5px 0}.str-fmt[_ngcontent-%COMP%]{text-align:left}.num-fmt[_ngcontent-%COMP%]{text-align:right}.date-fmt[_ngcontent-%COMP%]{text-align:left}"]}),e})(),Y=(()=>{class e extends r.a{constructor(e,t){super(e),this.injector=e,this.sampleService=t,this.pageViewModel=new s.l(this.injector),this.lookupViewModel1=new s.k(this.injector),this.lookupViewModel2=new s.k(this.injector),this.selectListViewModel1=new s.m(this.injector),this.selectListViewModel2=new s.m(this.injector),this.datePickerViewModel1=new s.e(this.injector),this.tableViewModel=new s.p}ngOnInit(){return e=this,void 0,n=function*(){this.pageViewModel.title="\u30da\u30fc\u30b8\u30b5\u30f3\u30d7\u30eb",this.lookupViewModel1.name="lookup1",this.lookupViewModel1.label="\u691c\u7d22\u6761\u4ef6\u2460\uff08\u5358\u4e00\uff09",this.lookupViewModel1.isMultiple=!1,this.lookupViewModel2.name="lookup2",this.lookupViewModel2.label="\u691c\u7d22\u6761\u4ef6\u2461\uff08\u8907\u6570\uff09",this.lookupViewModel2.isMultiple=!0,this.selectListViewModel1.label="\u9078\u629e\u6761\u4ef6\u2460",this.selectListViewModel1.isMultiple=!1,this.selectListViewModel2.label="\u9078\u629e\u6761\u4ef6\u2461",this.selectListViewModel2.isMultiple=!0,this.datePickerViewModel1.min=new Date(2019,0,1),this.datePickerViewModel1.max=new Date(2020,11,31),this.datePickerViewModel1.tabindex=4,this.datePickerViewModel1.holidayMode=s.g.Mix,this.datePickerViewModel1.holidayOfWeeksList=[0,6],this.datePickerViewModel1.holidayList=[new Date(2019,8,16),new Date(2019,8,23)],this.tableViewModel.columns=ee,this.tableViewModel.rowConditions=te,this.sampleService.getKeioLine().toPromise().then(e=>{this.tableViewModel.dataSource=e})},new((t=void 0)||(t=Promise))((function(o,i){function l(e){try{c(n.next(e))}catch(t){i(t)}}function a(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,a)}c((n=n.apply(e,[])).next())}));var e,t,n}toggle(){this.pageViewModel.sideMenuOpend=!this.pageViewModel.sideMenuOpend}wait(){this.pageViewModel.isWaiting=!0,setTimeout(()=>{this.pageViewModel.isWaiting=!1},1500)}gotoChat(){this.navigate(["/chat/main"])}gotoEditTable(){this.navigate(["/example/editabledTableSample"])}}return e.\u0275fac=function(t){return new(t||e)(m.Ob(m.s),m.Ob(d.l))},e.\u0275cmp=m.Ib({type:e,selectors:[["app-pege-sample"]],features:[m.zb],decls:41,vars:8,consts:[[3,"model"],[1,"contents-header"],[1,"contents-side"],[1,"contents-main"],["mat-button","",3,"click"],["name","",1,"example-radio-group",3,"ngModel","ngModelChange"],["value","over"],["value","side"],["value","push"],[2,"height","560px","overflow","auto"]],template:function(e,t){1&e&&(m.Ub(0,"app-page",0),m.Pb(1,"div",1),m.Ub(2,"div",2),m.Ub(3,"p"),m.Dc(4,"Side Menu is Opened"),m.Tb(),m.Ub(5,"div"),m.Pb(6,"app-lookup",0),m.Tb(),m.Ub(7,"div"),m.Pb(8,"app-lookup",0),m.Tb(),m.Ub(9,"div"),m.Pb(10,"app-select-list",0),m.Tb(),m.Ub(11,"div"),m.Pb(12,"app-select-list",0),m.Tb(),m.Ub(13,"div"),m.Pb(14,"app-date-picker",0),m.Tb(),m.Tb(),m.Ub(15,"div",3),m.Ub(16,"div"),m.Ub(17,"p"),m.Ub(18,"button",4),m.cc("click",(function(){return t.toggle()})),m.Dc(19,"toggle"),m.Tb(),m.Tb(),m.Ub(20,"p"),m.Ub(21,"button",4),m.cc("click",(function(){return t.wait()})),m.Dc(22,"Wait"),m.Tb(),m.Tb(),m.Ub(23,"p"),m.Ub(24,"button",4),m.cc("click",(function(){return t.gotoChat()})),m.Dc(25,"\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u3078"),m.Tb(),m.Tb(),m.Ub(26,"p"),m.Ub(27,"button",4),m.cc("click",(function(){return t.gotoEditTable()})),m.Dc(28,"\u5165\u529b\u53ef\u80fd\u30c6\u30fc\u30d6\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u3078"),m.Tb(),m.Tb(),m.Tb(),m.Ub(29,"div"),m.Ub(30,"mat-radio-group",5),m.cc("ngModelChange",(function(e){return t.pageViewModel.sideMenuMode=e})),m.Ub(31,"label"),m.Dc(32,"Mode:"),m.Tb(),m.Ub(33,"mat-radio-button",6),m.Dc(34,"Over"),m.Tb(),m.Ub(35,"mat-radio-button",7),m.Dc(36,"Side"),m.Tb(),m.Ub(37,"mat-radio-button",8),m.Dc(38,"Push"),m.Tb(),m.Tb(),m.Tb(),m.Ub(39,"div",9),m.Pb(40,"app-table",0),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.mc("model",t.pageViewModel),m.Cb(6),m.mc("model",t.lookupViewModel1),m.Cb(2),m.mc("model",t.lookupViewModel2),m.Cb(2),m.mc("model",t.selectListViewModel1),m.Cb(2),m.mc("model",t.selectListViewModel2),m.Cb(2),m.mc("model",t.datePickerViewModel1),m.Cb(16),m.mc("ngModel",t.pageViewModel.sideMenuMode),m.Cb(10),m.mc("model",t.tableViewModel))},directives:[u.a,I,E,$,w.a,R.b,i.n,i.q,R.a,X],styles:[".contents-side[_ngcontent-%COMP%]{padding:8px}"]}),e})();const ee=[new s.n({id:"station_cd",name:"\u99c5\u30b3\u30fc\u30c9",type:new s.b({type:s.c.string}),conditions:[new s.a({ope:s.d.Following,x:"2400111",style:{"background-color":"rgb(255,235,156)",color:"rgb(156,101,  0)"}}),new s.a({ope:s.d.Following,x:"2400124",style:{"background-color":"rgb(255,199,206)",color:"rgb(156,  0,  6)"}}),new s.a({ope:s.d.Unconditional,style:{"background-color":"rgb(198,239,206)",color:"rgb(  0, 97,  0)"}})]}),new s.n({id:"station_name",name:"\u99c5\u540d",type:new s.b({type:s.c.string})}),new s.n({id:"lat",name:"\u7def\u5ea6",type:new s.b({type:s.c.number,format:"0.0-6"})}),new s.n({id:"lon",name:"\u7d4c\u5ea6",type:new s.b({type:s.c.number,format:"0.0-6"})}),new s.n({id:"open",name:"\u958b\u696d",type:new s.b({type:s.c.date})})],te=[new s.o({targetId:"station_name",condition:new s.a({ope:s.d.Contain,x:"\u4e2d",style:{"background-color":"rgb(255,235,156)",color:"rgb(156,101,  0)"}})})];var ne=n("7EHt"),oe=n("2Vo4");const ie=["cellEditor"];function le(e,t){if(1&e&&(m.Ub(0,"th",9),m.Dc(1),m.Tb()),2&e){const e=m.gc().$implicit;m.Cb(1),m.Fc(" ",e.label," ")}}function ae(e,t){1&e&&m.Qb(0)}function ce(e,t){if(1&e&&(m.Ub(0,"mat-form-field"),m.Pb(1,"input",14),m.Tb()),2&e){const e=t.control;m.Cb(1),m.mc("formControlName",e)}}const se=function(e,t){return{control:e,fromGroup:t}};function re(e,t){if(1&e){const e=m.Vb();m.Ub(0,"td",10,11),m.cc("click",(function(){m.vc(e);const n=t.index,o=m.gc().$implicit;return m.gc(2).cellClick(n,o.id)})),m.Bc(2,ae,1,0,"ng-container",12),m.Bc(3,ce,2,1,"ng-template",null,13,m.Cc),m.Tb()}if(2&e){const e=t.$implicit,n=t.index,o=m.sc(4),i=m.gc().$implicit,l=m.gc(2);m.Fb("selectedCell",l.isSelected(n,i.id,e)),m.mc("formGroupName",n),m.Cb(2),m.mc("ngTemplateOutlet",i.element?i.element:o)("ngTemplateOutletContext",m.qc(5,se,i.id,l.rows.controls[n]))}}function de(e,t){1&e&&(m.Sb(0,6),m.Bc(1,le,2,1,"th",7),m.Bc(2,re,5,8,"td",8),m.Rb()),2&e&&m.mc("matColumnDef",t.$implicit.id)}function me(e,t){1&e&&m.Pb(0,"tr",15)}function ue(e,t){1&e&&m.Pb(0,"tr",16)}function pe(e,t){if(1&e&&(m.Ub(0,"form",1),m.Ub(1,"table",2),m.Bc(2,de,3,1,"ng-container",3),m.Bc(3,me,1,0,"tr",4),m.Bc(4,ue,1,0,"tr",5),m.Tb(),m.Tb()),2&e){const e=m.gc();m.mc("formGroup",e.model.formManage.form),m.Cb(1),m.mc("dataSource",e.dataSource)("formArrayName",e.model.formManage.arrayName),m.Cb(1),m.mc("ngForOf",e.model.columns.items),m.Cb(1),m.mc("matHeaderRowDef",e.model.columns.columnNames)("matHeaderRowDefSticky",!0),m.Cb(1),m.mc("matRowDefColumns",e.model.columns.columnNames)}}let be=(()=>{class e{constructor(e,t){this.fb=e,this.ngZone=t,this.dataSource=new oe.a([]),this.isFocused=!1}get rows(){return this.model.formManage.formArray}onKeyDown(e){var t=!1,n=this.getTableDataCellElement(),o=e.key+(e.shiftKey?":Shift":""),i={ArrowLeft:e=>this.model.selectedCell.prevColumn().finally(()=>{this.blurInput(e),this.isFocused=!1,t=!0}),ArrowRight:e=>this.model.selectedCell.nextColumn().finally(()=>{this.blurInput(e),this.isFocused=!1,t=!0}),ArrowUp:e=>this.model.selectedCell.prevRow().finally(()=>{this.blurInput(e),this.isFocused=!1,t=!0}),ArrowDown:e=>this.model.selectedCell.nextRow().finally(()=>{this.blurInput(e),this.isFocused=!1,t=!0}),Enter:e=>this.model.selectedCell.nextEnter().finally(()=>{this.blurInput(e),this.isFocused=!1,t=!0}),"Enter:Shift":e=>this.model.selectedCell.prevEnter().finally(()=>{this.blurInput(e),this.isFocused=!1,t=!0}),Tab:e=>this.model.selectedCell.nextTab().finally(()=>{this.focusInput(this.getTableDataCellElement()),t=!0}),"Tab:Shift":e=>this.model.selectedCell.prevTab().finally(()=>{this.focusInput(this.getTableDataCellElement()),t=!0}),F2:e=>new Promise((e,t)=>{this.focusInput(this.getTableDataCellElement()),e()})};i[o]&&i[o](n).finally(()=>{(t&&"number"==this.getInput(n).type||"Tab"==e.key)&&e.preventDefault()})}onKeyPress(e){this.isFocused||(this.focusInput(this.getTableDataCellElement()),this.isFocused=!0)}ngOnInit(){this.model.selectedCell.positionChanged=e=>{this.rows.value.map((t,n)=>{t.selectedColumn=null,n==e.rowIndex&&(t.selectedColumn=this.model.columns.getColumnName(e.columnIndex))}),this.model.formManage.patchValue(this.rows.value)},this.updateView(),setTimeout(()=>{this.model.selectedCell.positionChanged({rowIndex:0,columnIndex:0})},0)}getTableDataCellElement(){var e=this.model.selectedCell.elementIndex;return this.cellsItem.toArray()[e].nativeElement}getInput(e){return e.querySelector("input")}focusInput(e){this.getInput(e).focus()}blurInput(e){this.getInput(e).blur()}updateView(){this.dataSource.next(this.rows.controls)}isSelected(e,t,n){return e==this.model.selectedCell.rowIndex&&t==n.value.selectedColumn}cellClick(e,t){this.model.selectedCell.rowIndex=e,this.model.selectedCell.columnIndex=this.model.columns.indexOfById(t),this.model.selectedCell.positionChanged({rowIndex:this.model.selectedCell.rowIndex,columnIndex:this.model.selectedCell.columnIndex})}}return e.\u0275fac=function(t){return new(t||e)(m.Ob(i.d),m.Ob(m.A))},e.\u0275cmp=m.Ib({type:e,selectors:[["app-editable-table"]],viewQuery:function(e,t){var n;1&e&&m.Ic(ie,!0,m.l),2&e&&m.rc(n=m.dc())&&(t.cellsItem=n)},hostBindings:function(e,t){1&e&&m.cc("keydown",(function(e){return t.onKeyDown(e)}),!1,m.uc)("keypress",(function(e){return t.onKeyPress(e)}),!1,m.uc)},inputs:{model:"model"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["mat-table","",3,"dataSource","formArrayName"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"formGroupName","selectedCell","click",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",3,"formGroupName","click"],["cellEditor",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultColumn",""],["matInput","","type","text",3,"formControlName"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&m.Bc(0,pe,5,7,"form",0),2&e&&m.mc("ngIf",t.rows.length>0)},directives:[o.o,i.u,i.o,i.g,j.j,i.c,o.n,j.g,j.i,j.c,j.e,j.b,j.d,j.a,i.h,o.t,g.b,C.b,i.b,i.n,i.f,j.f,j.h],styles:["form[_ngcontent-%COMP%]{padding:16px}table[_ngcontent-%COMP%]{width:calc(100% - 32px);border:1px solid rgba(0,0,0,.12)}.selectedCell[_ngcontent-%COMP%]{background-color:#d9efff}.right-align[_ngcontent-%COMP%]{text-align:right}td[_ngcontent-%COMP%]{padding:4px!important}"]}),e})();const he=["position"];function fe(e,t){if(1&e&&(m.Ub(0,"form"),m.Ub(1,"mat-form-field"),m.Pb(2,"input",4),m.Tb(),m.Tb()),2&e){const e=t.control;m.Cb(2),m.mc("formControlName",e)}}const ge=[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"}],Ce=[{path:"",redirectTo:"pagesample",pathMatch:"full"},{path:"pagesample",component:Y,pathMatch:"full"},{path:"editabledTableSample",component:(()=>{class e{constructor(e,t,n){this.fb=e,this.ngZone=t,this.injector=n,this.tableViewModel=new s.f(this.injector),this.formArrayName="rows",this.form=this.fb.group({}),this.form.addControl(this.formArrayName,this.fb.array([]))}get formRows(){return this.form.get(this.formArrayName)}ngOnInit(){this.tableViewModel.formManage.form=this.form,this.tableViewModel.formManage.arrayName=this.formArrayName,setTimeout(()=>{this.tableViewModel.columns.items=[{id:"position",label:"No ."},{id:"name",label:"Name"},{id:"weight",label:"Weight"},{id:"symbol",label:"Symbol"}],ge.forEach(e=>this.addRow(e))},0)}addRow(e){const t=this.tableViewModel.columns.generateFormGroup(e);this.formRows.push(t)}}return e.\u0275fac=function(t){return new(t||e)(m.Ob(i.d),m.Ob(m.A),m.Ob(m.s))},e.\u0275cmp=m.Ib({type:e,selectors:[["app-edit-table-sample"]],viewQuery:function(e,t){var n;1&e&&m.Ic(he,!0),2&e&&m.rc(n=m.dc())&&(t.positionEle=n.first)},decls:21,vars:6,consts:[[3,"expanded"],[3,"formGroup"],[3,"model"],["position",""],["matInput","","type","number",1,"right-align",3,"formControlName"]],template:function(e,t){1&e&&(m.Ub(0,"mat-accordion"),m.Ub(1,"mat-expansion-panel",0),m.Ub(2,"mat-expansion-panel-header"),m.Ub(3,"mat-panel-title"),m.Dc(4," \u30c7\u30fc\u30bf\u5165\u529b "),m.Tb(),m.Ub(5,"mat-panel-description"),m.Dc(6," \u5143\u7d20\u8a18\u53f7 "),m.Tb(),m.Tb(),m.Ub(7,"form",1),m.Ub(8,"div"),m.Pb(9,"app-editable-table",2),m.Tb(),m.Tb(),m.Bc(10,fe,3,1,"ng-template",null,3,m.Cc),m.Tb(),m.Tb(),m.Ub(12,"mat-accordion"),m.Ub(13,"mat-expansion-panel"),m.Ub(14,"mat-expansion-panel-header"),m.Ub(15,"mat-panel-title"),m.Dc(16," \u30d5\u30a9\u30fc\u30e0\u30c7\u30fc\u30bf\u78ba\u8a8d "),m.Tb(),m.Tb(),m.Ub(17,"pre"),m.Dc(18),m.hc(19,"json"),m.Tb(),m.Tb(),m.Tb(),m.Pb(20,"router-outlet")),2&e&&(m.Cb(1),m.mc("expanded",!0),m.Cb(6),m.mc("formGroup",t.form),m.Cb(2),m.mc("model",t.tableViewModel),m.Cb(9),m.Ec(m.ic(19,4,t.form.value)))},directives:[ne.a,ne.c,ne.e,ne.f,ne.d,i.u,i.o,i.g,be,l.d,i.p,g.b,C.b,i.r,i.b,i.n,i.f],pipes:[o.i],styles:[".right-align[_ngcontent-%COMP%]{text-align:right}"]}),e})(),pathMatch:"full"},{path:"**",redirectTo:""}];let we=(()=>{class e{}return e.\u0275mod=m.Mb({type:e}),e.\u0275inj=m.Lb({factory:function(t){return new(t||e)},imports:[[o.c,i.i,i.s,a.a,l.c.forChild(Ce),c.a]]}),e})()}}]);